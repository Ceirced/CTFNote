fragment PublicProfileFragment on PublicProfile {
  id
  username
  color
  description
  role
  nodeId
}

fragment ProfileFragment on Profile {
  id
  username
  lastactive
  color
  description
  role
  nodeId
}

fragment RestrictedProfile on Profile {
  id
  username
  color
  description
  role
  nodeId
}

mutation updatePassword($oldPassword: String!, $newPassword: String!) {
  changePassword(
    input: { oldpassword: $oldPassword, newpassword: $newPassword }
  ) {
    changePasswordResponse {
      ok
    }
  }
}
mutation updateProfile($id: Int!, $patch: ProfilePatch!) {
  updateProfile(input: { id: $id, patch: $patch }) {
    profile {
      ...ProfileFragment
    }
  }
}

query getTeam {
  publicProfiles {
    nodes {
      ...PublicProfileFragment
    }
  }
}

query getTeamAdmin {
  profiles {
    nodes {
      ...ProfileFragment
    }
  }
}

subscription subscribeToPublicProfile {
  listen(topic: "update:public_profiles") {
    relatedNode {
      # nodeId
      ... on PublicProfile {
        ...PublicProfileFragment
      }
    }
  }
}
# subscription subscribeToProfileCreated {
#   listen(topic: "created:profiles") {
#     relatedNodeId
#     relatedNode {
#       nodeId
#       ... on PublicProfile {
#         ...PublicProfileFragment
#       }
#     }
#   }
# }

# subscription subscribeToProfileDeleted {
#   listen(topic: "deleted:profiles") {
#     relatedNodeId
#     relatedNode {
#       nodeId
#       ... on PublicProfile {
#         ...PublicProfileFragment
#       }
#     }
#   }
# }
